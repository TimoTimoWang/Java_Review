
平均CPU的使用率=1-（空闲时间new-空闲时间old）/（总CPU时间new-总CPU时间Old）

 /proc/stat 提供的就 是系统的 CPU 和任务统计信息.
 
 /proc/[pid]/stat可以查看每个进程的运行情况。
 
 perf 是 Linux 2.6.31 以后内置的性能分析工具。它以性能事件采样为基础，不仅可以分析系统的各种事件和内核性 能，还可以用来分析指定应用程序的性能问题。
 
 当系统CPU使用率升高，但又没有办法通过top等命令查看到是哪一个进程升高的时候，这时CPU的使用率就不太正常，一般情况下导致这种情况的原因是短时应用所导致。
 1. 应用中调用了外部的大量二进制程序，这些程序的运行时间又比较短，因此不容易被top命令查看出来。
 2. 程序因为某种原因不短的崩溃重启，而启动过程中资源初始化，很可能会占用相当多的CPU。
 
 排查的办法：
 1. 使用per工具
 # 记录性能事件，等待大约15秒后按 Ctrl+C 退出
 $ perf record -g
# 查看报告
$ perf report
2. execsnoop工具，execsnoop 就是一个专为短时进程设计的工具。它通过 ftrace 实时监控进程的 exec() 行为，并输出短时进程的基本信息，包括进程PID、父进程 PID、命令行参数以及执行的结果。
 
 
 
 
 
